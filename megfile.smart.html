<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>megfile.smart module &mdash; megfile  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="megfile.smart_path module" href="megfile.smart_path.html" />
    <link rel="prev" title="API Reference" href="megfile.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            megfile
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="path_format.html">Path Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="megfile.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">megfile.smart module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.SmartCacher"><code class="docutils literal notranslate"><span class="pre">SmartCacher</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#megfile.smart.SmartCacher.cache_path"><code class="docutils literal notranslate"><span class="pre">SmartCacher.cache_path</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.register_copy_func"><code class="docutils literal notranslate"><span class="pre">register_copy_func()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_abspath"><code class="docutils literal notranslate"><span class="pre">smart_abspath()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_access"><code class="docutils literal notranslate"><span class="pre">smart_access()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_cache"><code class="docutils literal notranslate"><span class="pre">smart_cache()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_combine_open"><code class="docutils literal notranslate"><span class="pre">smart_combine_open()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_concat"><code class="docutils literal notranslate"><span class="pre">smart_concat()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_copy"><code class="docutils literal notranslate"><span class="pre">smart_copy()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_exists"><code class="docutils literal notranslate"><span class="pre">smart_exists()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_getmd5"><code class="docutils literal notranslate"><span class="pre">smart_getmd5()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_getmtime"><code class="docutils literal notranslate"><span class="pre">smart_getmtime()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_getsize"><code class="docutils literal notranslate"><span class="pre">smart_getsize()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_glob"><code class="docutils literal notranslate"><span class="pre">smart_glob()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_glob_stat"><code class="docutils literal notranslate"><span class="pre">smart_glob_stat()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_iglob"><code class="docutils literal notranslate"><span class="pre">smart_iglob()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_isabs"><code class="docutils literal notranslate"><span class="pre">smart_isabs()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_isdir"><code class="docutils literal notranslate"><span class="pre">smart_isdir()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_isfile"><code class="docutils literal notranslate"><span class="pre">smart_isfile()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_islink"><code class="docutils literal notranslate"><span class="pre">smart_islink()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_ismount"><code class="docutils literal notranslate"><span class="pre">smart_ismount()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_listdir"><code class="docutils literal notranslate"><span class="pre">smart_listdir()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_load_content"><code class="docutils literal notranslate"><span class="pre">smart_load_content()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_load_from"><code class="docutils literal notranslate"><span class="pre">smart_load_from()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_load_text"><code class="docutils literal notranslate"><span class="pre">smart_load_text()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_makedirs"><code class="docutils literal notranslate"><span class="pre">smart_makedirs()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_move"><code class="docutils literal notranslate"><span class="pre">smart_move()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_open"><code class="docutils literal notranslate"><span class="pre">smart_open()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_path_join"><code class="docutils literal notranslate"><span class="pre">smart_path_join()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_readlink"><code class="docutils literal notranslate"><span class="pre">smart_readlink()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_realpath"><code class="docutils literal notranslate"><span class="pre">smart_realpath()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_relpath"><code class="docutils literal notranslate"><span class="pre">smart_relpath()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_remove"><code class="docutils literal notranslate"><span class="pre">smart_remove()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_rename"><code class="docutils literal notranslate"><span class="pre">smart_rename()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_save_as"><code class="docutils literal notranslate"><span class="pre">smart_save_as()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_save_content"><code class="docutils literal notranslate"><span class="pre">smart_save_content()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_save_text"><code class="docutils literal notranslate"><span class="pre">smart_save_text()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_scan"><code class="docutils literal notranslate"><span class="pre">smart_scan()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_scan_stat"><code class="docutils literal notranslate"><span class="pre">smart_scan_stat()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_scandir"><code class="docutils literal notranslate"><span class="pre">smart_scandir()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_stat"><code class="docutils literal notranslate"><span class="pre">smart_stat()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_symlink"><code class="docutils literal notranslate"><span class="pre">smart_symlink()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_sync"><code class="docutils literal notranslate"><span class="pre">smart_sync()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_sync_with_progress"><code class="docutils literal notranslate"><span class="pre">smart_sync_with_progress()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_touch"><code class="docutils literal notranslate"><span class="pre">smart_touch()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_unlink"><code class="docutils literal notranslate"><span class="pre">smart_unlink()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#megfile.smart.smart_walk"><code class="docutils literal notranslate"><span class="pre">smart_walk()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="megfile.smart_path.html">megfile.smart_path module</a></li>
<li class="toctree-l2"><a class="reference internal" href="megfile.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">CHANGELOG</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/megvii-research/megfile">GitHub</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">megfile</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="megfile.html">API Reference</a></li>
      <li class="breadcrumb-item active">megfile.smart module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/megfile.smart.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-megfile.smart">
<span id="megfile-smart-module"></span><h1>megfile.smart module<a class="headerlink" href="#module-megfile.smart" title="Link to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="megfile.smart.SmartCacher">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">SmartCacher</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'r'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/megfile/smart.html#SmartCacher"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.SmartCacher" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">FileCacher</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="megfile.smart.SmartCacher.cache_path">
<span class="sig-name descname"><span class="pre">cache_path</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#megfile.smart.SmartCacher.cache_path" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.register_copy_func">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">register_copy_func</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_protocol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_protocol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#register_copy_func"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.register_copy_func" title="Link to this definition"></a></dt>
<dd><p>Used to register copy func between protocols, and do not allow duplicate registration</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_protocol</strong> – protocol name of source file, e.g. ‘s3’</p></li>
<li><p><strong>dst_protocol</strong> – protocol name of destination file, e.g. ‘s3’</p></li>
<li><p><strong>copy_func</strong> – copy func, its type is: 
Callable[[str, str, Optional[Callable[[int], None]], Optional[bool], Optional[bool]], None]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_abspath">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_abspath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/megfile/smart.html#smart_abspath"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_abspath" title="Link to this definition"></a></dt>
<dd><p>Return the absolute path of given path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> – Given path</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Absolute path of given path</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_access">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_access</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Access</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_access"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_access" title="Link to this definition"></a></dt>
<dd><p>Test if path has access permission described by mode</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – Path to be tested</p></li>
<li><p><strong>mode</strong> – Access mode(Access.READ, Access.WRITE, Access.BUCKETREAD, Access.BUCKETWRITE)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>bool, if the path has read/write access.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_cache">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cacher=&lt;class</span> <span class="pre">'megfile.smart.SmartCacher'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/megfile/smart.html#smart_cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_cache" title="Link to this definition"></a></dt>
<dd><p>Return a path to Posixpath Interface</p>
<p>param path: Path to cache
param s3_cacher: Cacher for s3 path
param options: Optional arguments for s3_cacher</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_combine_open">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_combine_open</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_glob:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'rb'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">open_func=&lt;function</span> <span class="pre">smart_open&gt;</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CombineReader</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_combine_open"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_combine_open" title="Link to this definition"></a></dt>
<dd><p>Open a unified reader that supports multi file reading.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path_glob</strong> – A path may contain shell wildcard characters</p></li>
<li><p><strong>mode</strong> – Mode to open file, supports ‘rb’</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A <code class="docutils literal notranslate"><span class="pre">`CombineReader`</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_concat">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_concat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_paths</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_concat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_concat" title="Link to this definition"></a></dt>
<dd><p>Concatenate src_paths to dst_path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_paths</strong> – List of source paths</p></li>
<li><p><strong>dst_path</strong> – Destination path</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_copy">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">followlinks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_copy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_copy" title="Link to this definition"></a></dt>
<dd><p>Copy file from source path to destination path</p>
<p>Here are a few examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">megfile</span> <span class="kn">import</span> <span class="n">smart_copy</span><span class="p">,</span> <span class="n">smart_stat</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Bar</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_bar</span> <span class="o">=</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">total</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytes_num</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">bytes_num</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">src_path</span> <span class="o">=</span> <span class="s1">&#39;test.png&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dst_path</span> <span class="o">=</span> <span class="s1">&#39;test1.png&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">smart_copy</span><span class="p">(</span><span class="n">src_path</span><span class="p">,</span> <span class="n">dst_path</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">Bar</span><span class="p">(</span><span class="n">total</span><span class="o">=</span><span class="n">smart_stat</span><span class="p">(</span><span class="n">src_path</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">),</span> <span class="n">followlinks</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">856960it [00:00, 260592384.24it/s]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_path</strong> – Given source path</p></li>
<li><p><strong>dst_path</strong> – Given destination path</p></li>
<li><p><strong>callback</strong> – Called periodically during copy, and the input parameter is the data size (in bytes) of copy since the last call</p></li>
<li><p><strong>followlinks</strong> – False if regard symlink as file, else True</p></li>
<li><p><strong>overwrite</strong> – whether or not overwrite file when exists, default is True</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_exists">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">followlinks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_exists" title="Link to this definition"></a></dt>
<dd><p>Test if path or s3_url exists</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> – Path to be tested</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if path exists, else False</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_getmd5">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_getmd5</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recalculate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/megfile/smart.html#smart_getmd5"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_getmd5" title="Link to this definition"></a></dt>
<dd><p>Get md5 value of file</p>
<p>param path: File path
param recalculate: calculate md5 in real-time or not return s3 etag when path is s3</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_getmtime">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_getmtime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_getmtime"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_getmtime" title="Link to this definition"></a></dt>
<dd><p>Get last-modified time of the file on the given s3_url or file path (in Unix timestamp format).
If the path is an existent directory, return the latest modified time of all file in it. The mtime of empty directory is 1970-01-01 00:00:00</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> – Given path</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Last-modified time</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>FileNotFoundError</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_getsize">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_getsize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_getsize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_getsize" title="Link to this definition"></a></dt>
<dd><p>Get file size on the given s3_url or file path (in bytes).
If the path in a directory, return the sum of all file size in it, including file in subdirectories (if exist).
The result excludes the size of directory itself. In other words, return 0 Byte on an empty directory path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> – Given path</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>File size</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>FileNotFoundError</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_glob">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_glob</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pathname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_ok</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_glob"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_glob" title="Link to this definition"></a></dt>
<dd><p>Given pathname may contain shell wildcard characters, return path list in ascending alphabetical order, in which path matches glob pattern</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pathname</strong> – A path pattern may contain shell wildcard characters</p></li>
<li><p><strong>recursive</strong> – If False, this function will not glob recursively</p></li>
<li><p><strong>missing_ok</strong> – If False and target path doesn’t match any file, raise FileNotFoundError</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_glob_stat">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_glob_stat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pathname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_ok</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">FileEntry</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_glob_stat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_glob_stat" title="Link to this definition"></a></dt>
<dd><p>Given pathname may contain shell wildcard characters, return a list contains tuples of path and file stat in ascending alphabetical order, in which path matches glob pattern</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pathname</strong> – A path pattern may contain shell wildcard characters</p></li>
<li><p><strong>recursive</strong> – If False, this function will not glob recursively</p></li>
<li><p><strong>missing_ok</strong> – If False and target path doesn’t match any file, raise FileNotFoundError</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_iglob">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_iglob</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pathname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_ok</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_iglob"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_iglob" title="Link to this definition"></a></dt>
<dd><p>Given pathname may contain shell wildcard characters, return path iterator in ascending alphabetical order, in which path matches glob pattern</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pathname</strong> – A path pattern may contain shell wildcard characters</p></li>
<li><p><strong>recursive</strong> – If False, this function will not glob recursively</p></li>
<li><p><strong>missing_ok</strong> – If False and target path doesn’t match any file, raise FileNotFoundError</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_isabs">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_isabs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_isabs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_isabs" title="Link to this definition"></a></dt>
<dd><p>Test whether a path is absolute</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> – Given path</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if a path is absolute, else False</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_isdir">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_isdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">followlinks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_isdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_isdir" title="Link to this definition"></a></dt>
<dd><p>Test if a file path or an s3 url is directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> – Path to be tested</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if path is directory, else False</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_isfile">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_isfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">followlinks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_isfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_isfile" title="Link to this definition"></a></dt>
<dd><p>Test if a file path or an s3 url is file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> – Path to be tested</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if path is file, else False</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_islink">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_islink</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_islink"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_islink" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_ismount">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_ismount</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_ismount"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_ismount" title="Link to this definition"></a></dt>
<dd><p>Test whether a path is a mount point</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> – Given path</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if a path is a mount point, else False</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_listdir">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_listdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_listdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_listdir" title="Link to this definition"></a></dt>
<dd><p>Get all contents of given s3_url or file path. The result is in ascending alphabetical order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> – Given path</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>All contents of given s3_url or file path in ascending alphabetical order.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>FileNotFoundError, NotADirectoryError</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_load_content">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_load_content</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bytes</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_load_content"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_load_content" title="Link to this definition"></a></dt>
<dd><p>Get specified file from [start, stop) in bytes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – Specified path</p></li>
<li><p><strong>start</strong> – start index</p></li>
<li><p><strong>stop</strong> – stop index</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>bytes content in range [start, stop)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_load_from">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_load_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">BinaryIO</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_load_from"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_load_from" title="Link to this definition"></a></dt>
<dd><p>Read all content in binary on specified path and write into memory</p>
<p>User should close the BinaryIO manually</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> – Specified path</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>BinaryIO</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_load_text">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_load_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_load_text"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_load_text" title="Link to this definition"></a></dt>
<dd><p>Read content from path</p>
<p>param path: Path to be read</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_makedirs">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_makedirs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exist_ok</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_makedirs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_makedirs" title="Link to this definition"></a></dt>
<dd><p>Create a directory if is on fs.
If on s3, it actually check if target exists, and check if bucket has WRITE access</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – Given path</p></li>
<li><p><strong>missing_ok</strong> – if False and target directory not exists, raise FileNotFoundError</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>PermissionError, FileExistsError</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_move">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_move</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_move"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_move" title="Link to this definition"></a></dt>
<dd><p>Move file/directory on s3 or fs. <cite>s3://</cite> or <cite>s3://bucket</cite> is not allowed to move</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_path</strong> – Given source path</p></li>
<li><p><strong>dst_path</strong> – Given destination path</p></li>
<li><p><strong>overwrite</strong> – whether or not overwrite file when exists</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_open">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_open</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">path:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">~megfile.pathlike.BasePath</span> <span class="pre">|</span> <span class="pre">~os.PathLike,</span> <span class="pre">mode:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'r',</span> <span class="pre">s3_open_func:</span> <span class="pre">~typing.Callable[[str,</span> <span class="pre">str],</span> <span class="pre">~typing.BinaryIO]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">s3_buffered_open&gt;,</span> <span class="pre">encoding:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">errors:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">**options</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">IO</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_open"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_open" title="Link to this definition"></a></dt>
<dd><p>Open a file on the path</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On fs, the difference between this function and <code class="docutils literal notranslate"><span class="pre">io.open</span></code> is that this function create directories automatically, instead of raising FileNotFoundError</p>
</div>
<p>Currently, supported protocols are:</p>
<ol class="arabic simple">
<li><p>s3:      “s3://&lt;bucket&gt;/&lt;key&gt;”</p></li>
<li><p>http(s): http(s) url</p></li>
<li><p>stdio:   “stdio://-”</p></li>
<li><p>FS file: Besides above mentioned protocols, other path are considered fs path</p></li>
</ol>
<p>Here are a few examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">cv2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">raw</span> <span class="o">=</span> <span class="n">smart_open</span><span class="p">(</span><span class="s1">&#39;https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2275743969,3715493841&amp;fm=26&amp;gp=0.jpg&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imdecode</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">),</span> <span class="n">cv2</span><span class="o">.</span><span class="n">IMREAD_ANYDEPTH</span> <span class="o">|</span> <span class="n">cv2</span><span class="o">.</span><span class="n">IMREAD_COLOR</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – Given path</p></li>
<li><p><strong>mode</strong> – Mode to open file, supports r’[rwa][tb]?+?’</p></li>
<li><p><strong>s3_open_func</strong> – Function used to open s3_url. Require the function includes 2 necessary parameters, file path and mode</p></li>
<li><p><strong>encoding</strong> – encoding is the name of the encoding used to decode or encode the file. This should only be used in text mode.</p></li>
<li><p><strong>errors</strong> – errors is an optional string that specifies how encoding and decoding errors are to be handled—this cannot be used in binary mode.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>File-Like object</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>FileNotFoundError, IsADirectoryError, ValueError</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_path_join">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_path_join</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">other_paths</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_path_join"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_path_join" title="Link to this definition"></a></dt>
<dd><p>Concat 2 or more path to a complete path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – Given path</p></li>
<li><p><strong>other_paths</strong> – Paths to be concatenated</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Concatenated complete path</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For URI, the difference between this function and <code class="docutils literal notranslate"><span class="pre">os.path.join</span></code> is that this function ignores left side slash (which indicates absolute path) in <code class="docutils literal notranslate"><span class="pre">other_paths</span></code> and will directly concat.
e.g. os.path.join(‘s3://path’, ‘to’, ‘/file’) =&gt; ‘/file’, and smart_path_join(‘s3://path’, ‘to’, ‘/file’) =&gt; ‘/path/to/file’
But for fs path, this function behaves exactly like <code class="docutils literal notranslate"><span class="pre">os.path.join</span></code>
e.g. smart_path_join(‘/path’, ‘to’, ‘/file’) =&gt; ‘/file’</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_readlink">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_readlink</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_readlink"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_readlink" title="Link to this definition"></a></dt>
<dd><p>Return a string representing the path to which the symbolic link points.
:param path: Path to be read
:returns: Return a string representing the path to which the symbolic link points.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_realpath">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_realpath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/megfile/smart.html#smart_realpath"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_realpath" title="Link to this definition"></a></dt>
<dd><p>Return the real path of given path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> – Given path</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Real path of given path</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_relpath">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_relpath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/megfile/smart.html#smart_relpath"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_relpath" title="Link to this definition"></a></dt>
<dd><p>Return the relative path of given path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – Given path</p></li>
<li><p><strong>start</strong> – Given start directory</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Relative path from start</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_remove">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_ok</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_remove"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_remove" title="Link to this definition"></a></dt>
<dd><p>Remove the file or directory on s3 or fs, <cite>s3://</cite> and <cite>s3://bucket</cite> are not permitted to remove</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – Given path</p></li>
<li><p><strong>missing_ok</strong> – if False and target file/directory not exists, raise FileNotFoundError</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>PermissionError, FileNotFoundError</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_rename">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_rename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_rename"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_rename" title="Link to this definition"></a></dt>
<dd><p>Move file on s3 or fs. <cite>s3://</cite> or <cite>s3://bucket</cite> is not allowed to move</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_path</strong> – Given source path</p></li>
<li><p><strong>dst_path</strong> – Given destination path</p></li>
<li><p><strong>overwrite</strong> – whether or not overwrite file when exists</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_save_as">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_save_as</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_object</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BinaryIO</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_save_as"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_save_as" title="Link to this definition"></a></dt>
<dd><p>Write the opened binary stream to specified path, but the stream won’t be closed</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_object</strong> – Stream to be read</p></li>
<li><p><strong>path</strong> – Specified target path</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_save_content">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_save_content</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_save_content"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_save_content" title="Link to this definition"></a></dt>
<dd><p>Save bytes content to specified path</p>
<p>param path: Path to save content</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_save_text">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_save_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_save_text"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_save_text" title="Link to this definition"></a></dt>
<dd><p>Save text to specified path</p>
<p>param path: Path to save text</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_scan">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_scan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_ok</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">followlinks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_scan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_scan" title="Link to this definition"></a></dt>
<dd><p>Iteratively traverse only files in given directory, in alphabetical order.
Every iteration on generator yields a path string.</p>
<p>If path is a file path, yields the file only
If path is a non-existent path, return an empty generator
If path is a bucket path, return all file paths in the bucket</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – Given path</p></li>
<li><p><strong>missing_ok</strong> – If False and there’s no file in the directory, raise FileNotFoundError</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>UnsupportedError</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A file path generator</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_scan_stat">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_scan_stat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_ok</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">followlinks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">FileEntry</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_scan_stat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_scan_stat" title="Link to this definition"></a></dt>
<dd><p>Iteratively traverse only files in given directory, in alphabetical order.
Every iteration on generator yields a tuple of path string and file stat</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – Given path</p></li>
<li><p><strong>missing_ok</strong> – If False and there’s no file in the directory, raise FileNotFoundError</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>UnsupportedError</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A file path generator</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_scandir">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_scandir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">FileEntry</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_scandir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_scandir" title="Link to this definition"></a></dt>
<dd><p>Get all content of given s3_url or file path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> – Given path</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An iterator contains all contents have prefix path</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>FileNotFoundError, NotADirectoryError</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_stat">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_stat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">follow_symlinks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="megfile.fs.html#megfile.fs.StatResult" title="megfile.pathlike.StatResult"><span class="pre">StatResult</span></a></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_stat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_stat" title="Link to this definition"></a></dt>
<dd><p>Get StatResult of s3_url or file path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> – Given path</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>StatResult</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>FileNotFoundError</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_symlink">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_symlink</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_symlink"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_symlink" title="Link to this definition"></a></dt>
<dd><p>Create a symbolic link pointing to src_path named path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_path</strong> – Source path</p></li>
<li><p><strong>dst_path</strong> – Destination path</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_sync">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_sync</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">src_path:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">~megfile.pathlike.BasePath</span> <span class="pre">|</span> <span class="pre">~os.PathLike,</span> <span class="pre">dst_path:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">~megfile.pathlike.BasePath</span> <span class="pre">|</span> <span class="pre">~os.PathLike,</span> <span class="pre">callback:</span> <span class="pre">~typing.Callable[[str,</span> <span class="pre">int],</span> <span class="pre">None]</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">followlinks:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False,</span> <span class="pre">callback_after_copy_file:</span> <span class="pre">~typing.Callable[[str,</span> <span class="pre">str],</span> <span class="pre">None]</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">src_file_stats:</span> <span class="pre">~typing.Iterable[~megfile.pathlike.FileEntry]</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">map_func:</span> <span class="pre">~typing.Callable[[~typing.Callable,</span> <span class="pre">~typing.Iterable],</span> <span class="pre">~typing.Any]</span> <span class="pre">=</span> <span class="pre">&lt;class</span> <span class="pre">'map'&gt;,</span> <span class="pre">force:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False,</span> <span class="pre">overwrite:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_sync"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_sync" title="Link to this definition"></a></dt>
<dd><p>Sync file or directory</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When the parameter is file, this function bahaves like <code class="docutils literal notranslate"><span class="pre">smart_copy</span></code>.</p>
<p>If file and directory of same name and same level, sync consider it’s file first.</p>
</div>
<p>Here are a few examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Lock</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">megfile</span> <span class="kn">import</span> <span class="n">smart_sync</span><span class="p">,</span> <span class="n">smart_stat</span><span class="p">,</span> <span class="n">smart_glob</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Bar</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total_file</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_total_file</span> <span class="o">=</span> <span class="n">total_file</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_bar</span> <span class="o">=</span> <span class="kc">None</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_now</span> <span class="o">=</span> <span class="kc">None</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_file_index</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">Lock</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">num_bytes</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
<span class="gp">... </span>            <span class="k">if</span> <span class="n">path</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_now</span><span class="p">:</span>
<span class="gp">... </span>                <span class="bp">self</span><span class="o">.</span><span class="n">_file_index</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="gp">... </span>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;copy file </span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">:&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_file_index</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_total_file</span><span class="p">))</span>
<span class="gp">... </span>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bar</span><span class="p">:</span>
<span class="gp">... </span>                    <span class="bp">self</span><span class="o">.</span><span class="n">_bar</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">... </span>                <span class="bp">self</span><span class="o">.</span><span class="n">_bar</span> <span class="o">=</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">total</span><span class="o">=</span><span class="n">smart_stat</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
<span class="gp">... </span>                <span class="bp">self</span><span class="o">.</span><span class="n">_now</span> <span class="o">=</span> <span class="n">path</span>
<span class="gp">... </span>           <span class="bp">self</span><span class="o">.</span><span class="n">_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">num_bytes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">total_file</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">smart_glob</span><span class="p">(</span><span class="s1">&#39;src_path&#39;</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">smart_sync</span><span class="p">(</span><span class="s1">&#39;src_path&#39;</span><span class="p">,</span> <span class="s1">&#39;dst_path&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">Bar</span><span class="p">(</span><span class="n">total_file</span><span class="o">=</span><span class="n">total_file</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_path</strong> – Given source path</p></li>
<li><p><strong>dst_path</strong> – Given destination path</p></li>
<li><p><strong>callback</strong> – Called periodically during copy, and the input parameter is the data size (in bytes) of copy since the last call</p></li>
<li><p><strong>followlinks</strong> – False if regard symlink as file, else True</p></li>
<li><p><strong>callback_after_copy_file</strong> – Called after copy success, and the input parameter is src file path and dst file path</p></li>
<li><p><strong>src_file_stats</strong> – If this parameter is not None, only this parameter’s files will be synced, 
and src_path is the root_path of these files used to calculate the path of the target file. 
This parameter is in order to reduce file traversal times.</p></li>
<li><p><strong>map_func</strong> – A Callable func like <cite>map</cite>. You can use ThreadPoolExecutor.map, Pool.map and so on if you need concurrent capability.
default is standard library <cite>map</cite>.</p></li>
<li><p><strong>force</strong> – Sync file forcible, do not ignore same files, priority is higher than ‘overwrite’, default is False</p></li>
<li><p><strong>overwrite</strong> – whether or not overwrite file when exists, default is True</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_sync_with_progress">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_sync_with_progress</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">src_path,</span> <span class="pre">dst_path,</span> <span class="pre">callback:</span> <span class="pre">~typing.Callable[[str,</span> <span class="pre">int],</span> <span class="pre">None]</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">followlinks:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False,</span> <span class="pre">map_func:</span> <span class="pre">~typing.Callable[[~typing.Callable,</span> <span class="pre">~typing.Iterable],</span> <span class="pre">~typing.Iterator]</span> <span class="pre">=</span> <span class="pre">&lt;class</span> <span class="pre">'map'&gt;,</span> <span class="pre">force:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False,</span> <span class="pre">overwrite:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/megfile/smart.html#smart_sync_with_progress"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_sync_with_progress" title="Link to this definition"></a></dt>
<dd><p>Sync file or directory with progress bar</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_path</strong> – Given source path</p></li>
<li><p><strong>dst_path</strong> – Given destination path</p></li>
<li><p><strong>callback</strong> – Called periodically during copy, and the input parameter is the data size (in bytes) of copy since the last call</p></li>
<li><p><strong>followlinks</strong> – False if regard symlink as file, else True</p></li>
<li><p><strong>callback_after_copy_file</strong> – Called after copy success, and the input parameter is src file path and dst file path</p></li>
<li><p><strong>src_file_stats</strong> – If this parameter is not None, only this parameter’s files will be synced, 
and src_path is the root_path of these files used to calculate the path of the target file. 
This parameter is in order to reduce file traversal times.</p></li>
<li><p><strong>map_func</strong> – A Callable func like <cite>map</cite>. You can use ThreadPoolExecutor.map, Pool.map and so on if you need concurrent capability.
default is standard library <cite>map</cite>.</p></li>
<li><p><strong>force</strong> – Sync file forcible, do not ignore same files, priority is higher than ‘overwrite’, default is False</p></li>
<li><p><strong>overwrite</strong> – whether or not overwrite file when exists, default is True</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_touch">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_touch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/megfile/smart.html#smart_touch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_touch" title="Link to this definition"></a></dt>
<dd><p>Create a new file on path</p>
<p>param path: Path to create file</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_unlink">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_unlink</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_ok</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_unlink"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_unlink" title="Link to this definition"></a></dt>
<dd><p>Remove the file on s3 or fs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – Given path</p></li>
<li><p><strong>missing_ok</strong> – if False and target file not exists, raise FileNotFoundError</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>PermissionError, FileNotFoundError, IsADirectoryError</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="megfile.smart.smart_walk">
<span class="sig-prename descclassname"><span class="pre">megfile.smart.</span></span><span class="sig-name descname"><span class="pre">smart_walk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BasePath</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">followlinks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/megfile/smart.html#smart_walk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.smart.smart_walk" title="Link to this definition"></a></dt>
<dd><p>Generate the file names in a directory tree by walking the tree top-down.
For each directory in the tree rooted at directory path (including path itself),
it yields a 3-tuple (root, dirs, files).</p>
<p>root: a string of current path
dirs: name list of subdirectories (excluding ‘.’ and ‘..’ if they exist) in ‘root’. The list is sorted by ascending alphabetical order
files: name list of non-directory files (link is regarded as file) in ‘root’. The list is sorted by ascending alphabetical order</p>
<p>If path not exists, return an empty generator
If path is a file, return an empty generator
If try to apply walk() on unsupported path, raise UnsupportedError</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> – Given path</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>UnsupportedError</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A 3-tuple generator</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="megfile.html" class="btn btn-neutral float-left" title="API Reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="megfile.smart_path.html" class="btn btn-neutral float-right" title="megfile.smart_path module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, r-eng.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>